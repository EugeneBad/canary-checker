apiVersion: canaries.flanksource.com/v1
kind: Canary
metadata:
  name: http-fail
spec:
  interval: 30
  http:
    - endpoint: http://status.savanttools.com/?code=500
      responseCodes: [200]
    - endpoint: http://status.savanttools.com/?code=200
      responseCodes: [200]
      test:
        expr: 'sprint(code) == "500"'